<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Panel Administrador</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>

<style>
/* TU DISEÑO DE ADMIN ORIGINAL */
body{font-family:Arial;margin:0;background:#f5f5f5;color:#222}
header{background:#8B0000;color:#fff;padding:10px 20px;box-shadow: 0 2px 10px rgba(0,0,0,0.1);}
.header-container{max-width:1200px;margin:auto;display:flex;justify-content:space-between;align-items:center;}
.container{max-width:1200px;margin:auto;padding:20px}
form{background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.15);max-width:600px;margin:auto;display:none;}
input, textarea, select{width:100%;padding:12px;border:1px solid #bbb;border-radius:8px;margin-top:6px;}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:20px;margin-top:30px;}
.card{background:#fff;padding:14px;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,0.1);}
.card img{width:100%;height:180px;object-fit:cover;border-radius:8px;}
#loginOverlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);display:flex;justify-content:center;align-items:center;z-index:1000;}
#loginBox{background:white;padding:30px;border-radius:12px;text-align:center;width:300px;}
.btn-red{background:#8B0000;color:white;border:0;padding:10px;border-radius:6px;cursor:pointer;width:100%;margin-top:10px;}
</style>
</head>
<body>

<header>
  <div class="header-container">
    <div class="header-title">Panel Administrador</div>
  </div>
</header>

<div id="loginOverlay">
  <div id="loginBox">
    <h3>Acceso Admin</h3>
    <input type="email" id="correoLogin" placeholder="Correo admin">
    <button class="btn-red" onclick="verificarCorreo()">Entrar</button>
  </div>
</div>

<div class="container">
  <form id="form-producto">
    <h2 style="text-align:center;color:#8B0000;">Agregar nuevo producto</h2>
    <label>Nombre:</label><input id="nombre" required>
    <label>Precio:</label><input id="precio" required>
    <label>Descripción:</label><textarea id="descripcion"></textarea>
    <label>URL de Foto:</label><input id="foto" required>
    <button type="submit" class="btn-red">Subir a Firebase</button>
  </form>
  <div id="productos" class="grid"></div>
</div>

<script>
const firebaseConfig = { databaseURL: "https://tecnotrebol-67a34-default-rtdb.firebaseio.com" };
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function verificarCorreo() {
  if(document.getElementById("correoLogin").value === "gaboxxlopez28@gmail.com") {
    document.getElementById("loginOverlay").style.display = "none";
    document.getElementById("form-producto").style.display = "block";
    cargarProductos();
  } else { alert("Acceso denegado"); }
}

document.getElementById("form-producto").onsubmit = e => {
  e.preventDefault();
  const nuevo = {
    nombre: document.getElementById("nombre").value,
    precio: document.getElementById("precio").value,
    descripcion: document.getElementById("descripcion").value,
    foto: document.getElementById("foto").value
  };
  db.ref("productos").push(nuevo);
  e.target.reset();
  alert("¡Producto guardado en la nube!");
};

function cargarProductos() {
  db.ref("productos").on("value", snapshot => {
    const div = document.getElementById("productos");
    div.innerHTML = "";
    const data = snapshot.val();
    if(data) {
      Object.keys(data).forEach(id => {
        const p = data[id];
        div.innerHTML += `
          <div class="card">
            <img src="${p.foto}">
            <h3>${p.nombre}</h3>
            <p>${p.precio}</p>
            <button class="btn-red" style="background:#b30000" onclick="eliminar('${id}')">Eliminar</button>
          </div>`;
      });
    }
  });
}

function eliminar(id) { if(confirm("¿Borrar producto?")) db.ref("productos/" + id).remove(); }
</script>
</body>
</html>
